{"version":3,"sources":["Pages/login.js","Components/Loading.js","Components/Comment.js","Components/AddComment.js","Components/Edit.js","Components/Post.js","Components/Postcontainer.js","Components/PostForm.js","Pages/Main.js","Pages/Posts.js","Components/Layout.js","App.js","index.js"],"names":["Login","navigate","useNavigate","usernameRef","useRef","passwordRef","e","a","preventDefault","usernameValue","current","value","passwordValue","toast","type","axios","post","username","password","response","status","localStorage","setItem","data","token","role","mess","className","onSubmit","htmlFor","id","placeholder","ref","Loading","comment","info","description","user","AddComment","idPost","afterSubmit","useState","inputVal","setInputVal","body","patch","headers","Authorization","getItem","onChange","target","Edit","formData","FormData","Object","fromEntries","entries","validation","Array","from","values","every","it","alert","put","active","name","Post","_id","title","image","createdAt","likes","comments","Visibility","setVisibility","commentState","setCommentState","some","liked","setliked","length","likesCount","setLikes","console","log","this","props","history","push","Date","toLocaleDateString","src","alt","onClick","map","Comment","shortid","generate","Postcontainer","loading","posts","setPosts","useEffect","get","getPosts","PostForm","Main","isVisibleForm","setIsVisibleForm","whoami","setWhoami","getIdentity","Posts","Layout","App","element","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qRA6FeA,EAtFD,WACZ,IAAMC,EAAWC,cACXC,EAAcC,iBAAO,MACrBC,EAAcD,iBAAO,MAHT,4CAKlB,WAAwBE,GAAxB,uBAAAC,EAAA,yDACED,EAAEE,iBAEIC,EAAgBN,EAAYO,QAAQC,MACpCC,EAAgBP,EAAYK,QAAQC,MAErCF,GAAkBG,EANzB,uBAOIC,YAAM,2BAA4B,CAAEC,KAAM,UAP9C,mDAY2BC,IAAMC,KAC3B,wDACA,CAAEC,SAAUR,EAAeS,SAAUN,IAd3C,OAiB4B,OALlBO,EAZV,QAiBiBC,SACXC,aAAaC,QAAQ,QAASH,EAASI,KAAKC,OAC5CH,aAAaC,QAAQ,OAAQH,EAASI,KAAKE,MAC3CxB,EAAS,MApBf,kDAuBYkB,EAvBZ,KAuBYA,SAEJO,EAAO,GAEa,MAApBP,EAASC,OAAgBM,EAAO,mCACP,MAApBP,EAASC,OAAgBM,EAAO,wBACZ,MAApBP,EAASC,SAAgBM,EAAO,uBACzCb,YAAMa,EAAM,CAAEZ,KAAM,YA9BxB,2DALkB,sBAsClB,OACE,uBACEa,UAAU,wGACVC,SAzCc,4CAuChB,UAIE,cAAC,IAAD,IACA,sBAAKD,UAAU,YAAf,UACE,sBAAKA,UAAU,0BAAf,UACE,wBACEA,UAAU,kCACVE,QAAQ,aAFV,UAIE,cAAC,IAAD,CAAiBF,UAAU,0CAJ7B,cAOA,uBACEA,UAAU,qCACVG,GAAG,aACHhB,KAAK,OACLiB,YAAY,WACZC,IAAK7B,OAIT,sBAAKwB,UAAU,0BAAf,UACE,wBACEA,UAAU,kCACVE,QAAQ,aAFV,UAIE,cAAC,IAAD,CAAsBF,UAAU,0CAJlC,cAOA,uBACEA,UAAU,qCACVG,GAAG,aACHhB,KAAK,WACLiB,YAAY,WACZC,IAAK3B,OAGT,wBAAQsB,UAAU,sCAAsCb,KAAK,SAA7D,0B,uBC5EOmB,EANC,kBAChB,qBAAKN,UAAU,2GAAf,SACI,cAAC,IAAD,CAAWA,UAAU,2C,iDCUVO,EAbC,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACTC,EAAsBD,EAAtBC,YAAaC,EAASF,EAATE,KAErB,OACE,sBAAKV,UAAU,kBAAf,UACE,qBAAIA,UAAU,gDAAd,cACIU,EAAKpB,YAET,mBAAGU,UAAU,0BAAb,SAAwCS,QCkC/BE,EAzCI,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,OAAQC,EAAkB,EAAlBA,YAC5B,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAD8C,4CAO9C,WAAwBrC,GAAxB,eAAAC,EAAA,6DACED,EAAEE,iBAEIoC,EAAO,CACXR,YAAaM,GAJjB,SAOQ3B,IAAM8B,MAAN,iEACsDN,GAC1DK,EACA,CACEE,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aAZtD,OAiBEL,EAAY,IACZH,EAAYI,GAlBd,4CAP8C,sBA4B9C,OACE,sBAAMjB,UAAU,SAASC,SA7BmB,4CA6B5C,SACE,uBACEjB,MAAO+B,EACPO,SA7BN,SAAkB3C,GAChBqC,EAAYrC,EAAE4C,OAAOvC,QA6BjBgB,UAAU,gFACVb,KAAK,OACLiB,YAAY,gB,QC0CLoB,EA5EF,SAAC,GAAU,IAATrB,EAAQ,EAARA,GAAQ,4CAEnB,WAAwBxB,GAAxB,mBAAAC,EAAA,yDACID,EAAEE,iBACI4C,EAAW,IAAIC,SAAS/C,EAAE4C,QAC1BN,EAAOU,OAAOC,YAAYH,EAASI,WACnCC,EAAaC,MAAMC,KAAKP,EAASQ,UAEvBH,EAAWI,OAAM,SAACC,GAAD,MAAe,KAAPA,KAN7C,yCAQyBC,MAAM,6CAR/B,uBAUsBhD,IAAMiD,IAAN,gEACyClC,GADzC,2BAEXc,GAFW,IAELqB,OAAwB,OAAhBrB,EAAKqB,SACxB,CACEnB,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aAfxD,2DAFmB,sBAuBvB,OACI,uBACElB,GAAG,OACHF,SA1BiB,4CA2BjBD,UAAU,mEAHZ,UAKE,sBAAKA,UAAU,yBAAf,UACE,uBAAOE,QAAQ,QAAf,mBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,QACLpC,GAAG,aAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,cAAf,yBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,cACLpC,GAAG,mBAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,QAAf,mBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,QACLpC,GAAG,aAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,SAAf,oBACA,uBACEF,UAAU,sGACVb,KAAK,WACLoD,KAAK,SACLpC,GAAG,cAGP,yBACEhB,KAAK,SACLa,UAAU,8FAFZ,UAIE,cAAC,IAAD,CAA+BA,UAAU,iBAJ3C,iBCyESwC,EArIF,SAAC,GAAwB,IAAtBlD,EAAqB,EAArBA,SAAUD,EAAW,EAAXA,KAChBoD,EACNpD,EADMoD,IAAKC,EACXrD,EADWqD,MAAOjC,EAClBpB,EADkBoB,YAAakC,EAC/BtD,EAD+BsD,MAAOjC,EACtCrB,EADsCqB,KAAMkC,EAC5CvD,EAD4CuD,UAAWC,EACvDxD,EADuDwD,MAAOC,EAC9DzD,EAD8DyD,SAGhE,EAAqChC,oBAAS,GAA9C,mBAAQiC,EAAR,KAAoBC,EAApB,KACA,EAAwClC,mBAASgC,GAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KACA,EAA0BpC,mBACxB+B,EAAMM,MAAK,SAACzC,GAAD,OAAUA,EAAKpB,WAAaA,MADzC,mBAAO8D,EAAP,KAAcC,EAAd,KAGA,EAA+BvC,mBAAS+B,EAAMS,QAA9C,mBAAOC,EAAP,KAAmBC,EAAnB,KATmC,4CAenC,sBAAA5E,EAAA,+EAEUQ,IAAM8B,MAAN,8DACmDuB,GACvD,GACA,CACEtB,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aAPxD,OAYS+B,GAIHI,EAASD,EAAa,GACtBF,GAAS,KAJTG,EAASD,EAAa,GACtBF,GAAS,IAdf,+CAoBII,QAAQC,IAAR,MApBJ,yDAfmC,kEAuCjC,4BAAA9E,EAAA,+EAE2BQ,IAAM8B,MAAN,gEACoCuB,GAAO,KAChE,CACEtB,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aANxD,kBAEYzB,KAQN+D,KAAKC,MAAMC,QAAQC,KAAK,KAV9B,gDAaEL,QAAQC,IAAR,MAbF,0DAvCiC,sBAwDnC,OACE,sBAAK1D,UAAU,iGAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,qBAAIA,UAAU,QAAd,qBAAwBU,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAMpB,YAC9B,oBAAIU,UAAU,qBAAd,SACG,IAAI+D,KAAKnB,GAAWoB,0BAIvB,qBACEhE,UAAU,6CACViE,IAAKtB,EACLuB,IAAKxB,IAIT,sBAAK1C,UAAU,iEAAf,UACE,oBAAIA,UAAU,GAAd,SAAkB0C,IAClB,oBAAI1C,UAAU,sBAAd,SAAqCS,OAEvC,sBAAKT,UAAU,qCAAf,UAEE,yBACEmE,QA/E2B,2CAgF3BhF,KAAK,SACLa,UAAS,mEACPoD,EAAQ,sBAAwB,GADzB,KAHX,UAOE,iCACG,IACD,cAAC,IAAD,CAAgBpD,UAAU,oBAE3BuD,KAEH,yBACEpE,KAAK,SACLa,UAAU,4DAFZ,UAIE,iCACG,IACD,cAAC,IAAD,CAAcA,UAAU,iCAEzBiD,EAAaK,UAIhB,wBACEtD,UAAU,2DACVmE,QAzG2B,2CAuG7B,SAGA,iCACG,IACD,cAAC,IAAD,CAAUnE,UAAU,oCAGpB,gCACC+C,GAAc,cAAC,EAAD,CAAM5C,GAAIsC,IAC3B,wBACEzC,UAAU,2DACVmE,QAAS,kBAAInB,GAAeD,IAF9B,SAGA,iCACG,IACD,cAAC,IAAD,CAAc/C,UAAU,2CAK5B,gCACGiD,EAAamB,KAAI,SAAC7D,GAAD,OAChB,cAAC8D,EAAD,CAAkC7D,KAAMD,GAA1B+D,IAAQC,eAExB,cAAC,EAAD,CAAY3D,OAAQ6B,EAAK5B,YApH/B,SAAoBN,GAClB2C,EAAgB,GAAD,mBAAKD,GAAL,aAAC,eAAuB1C,GAAxB,IAAiCG,KAAM,CAAEpB,2BCkB7CkF,EAlCO,SAAC,GAAkB,IAAhBlF,EAAe,EAAfA,SACvB,EAA0BwB,mBAAS,CACjC2D,SAAS,EACT7E,KAAM,KAFR,mBAAO8E,EAAP,KAAcC,EAAd,KAsBA,OAjBAC,qBAAU,WAAM,4CACd,8BAAAhG,EAAA,sEACyBQ,IAAMyF,IAC3B,qEACA,CACE1D,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aALtD,gBACUzB,EADV,EACUA,KASR+E,EAAS,CAAEF,SAAS,EAAO7E,KAAMA,EAAKA,OAVxC,4CADc,uBAAC,WAAD,wBAcdkF,KACC,IAECJ,EAAMD,QAAgB,cAAC,EAAD,IAGxB,qBAAKzE,UAAU,wDAAf,SACG0E,EAAM9E,KAAKwE,KAAI,SAAC/E,GAAD,OACd,cAAC,EAAD,CAAqBC,SAAUA,EAAUD,KAAMA,GAApCA,EAAKoD,WC6CTsC,EA1EE,WAAM,4CACrB,WAAwBpG,GAAxB,mBAAAC,EAAA,yDACED,EAAEE,iBACI4C,EAAW,IAAIC,SAAS/C,EAAE4C,QAC1BN,EAAOU,OAAOC,YAAYH,EAASI,WACnCC,EAAaC,MAAMC,KAAKP,EAASQ,UAEvBH,EAAWI,OAAM,SAACC,GAAD,MAAe,KAAPA,KAN3C,yCAQuBC,MAAM,6CAR7B,uBAUoBhD,IAAMC,KACtB,wDADgB,2BAEX4B,GAFW,IAELqB,OAAwB,OAAhBrB,EAAKqB,SACxB,CACEnB,QAAS,CACPC,cAAc,UAAD,OAAY1B,aAAa2B,QAAQ,aAftD,2DADqB,sBAsBrB,OACE,uBACElB,GAAG,OACHF,SAzBkB,SAAD,mCA0BjBD,UAAU,mEAHZ,UAKE,sBAAKA,UAAU,yBAAf,UACE,uBAAOE,QAAQ,QAAf,mBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,QACLpC,GAAG,aAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,cAAf,yBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,cACLpC,GAAG,mBAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,QAAf,mBACA,uBACEF,UAAU,+BACVb,KAAK,OACLoD,KAAK,QACLpC,GAAG,aAGP,sBAAKH,UAAU,yBAAf,UACE,uBAAOE,QAAQ,SAAf,oBACA,uBACEF,UAAU,sGACVb,KAAK,WACLoD,KAAK,SACLpC,GAAG,cAGP,yBACEhB,KAAK,SACLa,UAAU,8FAFZ,UAIE,cAAC,IAAD,CAA+BA,UAAU,iBAJ3C,iBCZSgF,EAhDF,WACX,MAA0ClE,oBAAS,GAAnD,mBAAOmE,EAAP,KAAsBC,EAAtB,KACM5G,EAAWC,cACXmC,EAAOhB,aAAa2B,QAAQ,SAC5BvB,EAAOJ,aAAa2B,QAAQ,QAClC,EAA4BP,mBAAS,IAArC,mBAAOqE,EAAP,KAAeC,EAAf,KAwBA,OAtBAR,qBAAU,WAAM,4CACd,8BAAAhG,EAAA,sEACyBQ,IAAMyF,IAC3B,wDACA,CACE1D,QAAS,CACPC,cAAc,UAAD,OAAYV,MALjC,gBACUd,EADV,EACUA,KAQRwF,EAAUxF,EAAKN,UATjB,4CADc,uBAAC,WAAD,wBAad+F,GAEY,MAAR3E,GACFpC,EAAS,YAIV,IAGD,gCACY,UAATwB,GACC,sBAAKE,UAAU,OAAf,UACGiF,GAAiB,cAAC,EAAD,IAClB,wBACEd,QAAS,kBAAMe,GAAkBD,IACjC9F,KAAK,SACLa,UAAU,oDAHZ,SAKE,cAAC,IAAD,CAAWA,UAAU,oCAI3B,cAAC,EAAD,CAAeV,SAAU6F,QC7ChBG,EAJD,kBACZ,qBAAKtF,UAAU,oCAAf,wBCYauF,EAZA,SAAC,GAAe,IAAb3B,EAAY,EAAZA,MAGhB,OAFAH,QAAQC,IAAIE,GAGV,mCACE,8BACE,cAAC,IAAD,SCUO4B,EAZH,kBACV,cAAC,IAAD,UACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAOC,QAAS,cAAC,EAAD,IAAhB,UACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIF,QAAS,cAAC,EAAD,MAC/B,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,SAASF,QAAS,cAAC,EAAD,SAEtC,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,SAASF,QAAS,cAAC,EAAD,YCR1CG,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.b0c4bfeb.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport React, { useRef } from \"react\";\r\nimport { FaUserAstronaut, BsFillShieldLockFill } from \"react-icons/all\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const usernameRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const usernameValue = usernameRef.current.value;\r\n    const passwordValue = passwordRef.current.value;\r\n\r\n    if (!usernameValue || !passwordValue) {\r\n      toast(\"Ingrese sus credenciales\", { type: \"error\" });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://posts-pw2021.herokuapp.com/api/v1/auth/signin\",\r\n        { username: usernameValue, password: passwordValue }\r\n      );\r\n\r\n      if (response.status === 200) {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"role\", response.data.role);\r\n        navigate(\"/\");\r\n      }\r\n    } catch (error) {\r\n      const { response } = error;\r\n\r\n      let mess = \"\";\r\n\r\n      if (response.status === 401) mess = \"Datos Erroneos, intente de nuevo\";\r\n      else if (response.status === 500) mess = \"Error con el servidor\";\r\n      else if (response.status === 404) mess = \"Usuario inexistente\";\r\n      toast(mess, { type: \"warning\" });\r\n    }\r\n  }\r\n  return (\r\n    <form\r\n      className=\"text-white flex flex-col justify-center items-center mx-auto  w-80 max-w-screen-sm h-screen md:w-auto\"\r\n      onSubmit={onSubmit}\r\n    >\r\n      <ToastContainer />\r\n      <div className=\"space-y-5\">\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <label\r\n            className=\"text-lg font-medium text-center\"\r\n            htmlFor=\"L-username\"\r\n          >\r\n            <FaUserAstronaut className=\"h-5 w-5 items-center inline-flex mr-3\" />\r\n            Username\r\n          </label>\r\n          <input\r\n            className=\"rounded-lg px-2 py-1 text-gray-600\"\r\n            id=\"L-username\"\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            ref={usernameRef}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <label\r\n            className=\"text-lg font-medium text-center\"\r\n            htmlFor=\"L-password\"\r\n          >\r\n            <BsFillShieldLockFill className=\"h-5 w-5 items-center inline-flex mr-3\" />\r\n            Password\r\n          </label>\r\n          <input\r\n            className=\"rounded-lg px-2 py-1 text-gray-600\"\r\n            id=\"L-password\"\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            ref={passwordRef}\r\n          />\r\n        </div>\r\n        <button className=\"rounded-2xl w-full bg-gray-500 py-2\" type=\"submit\">\r\n          Login\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport {TiRefresh} from 'react-icons/all';\r\n\r\nconst Loading = () => (\r\n<div className=\"absolute top-0 left-0 z-20 bg-gray-100 h-screen w-screen bg-opacity-50 flex justify-center items-center \">\r\n    <TiRefresh className=\"stroke w-8 h-8 stroke animate-spin \" />\r\n</div>\r\n);\r\n\r\nexport default Loading;","import React from \"react\";\r\n\r\nconst comment = ({ info }) => {\r\n  const { description, user } = info;\r\n\r\n  return (\r\n    <div className=\"border-t-2 my-3\">\r\n      <h1 className=\" nt-2 my-2 font-small text-yellow-200 text-sn\">\r\n        @{user.username}\r\n      </h1>\r\n      <p className=\"text-xs font-small pl-4\">{description}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default comment;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AddComment = ({ idPost, afterSubmit }) => {\r\n  const [inputVal, setInputVal] = useState(\"\");\r\n\r\n  function onChange(e) {\r\n    setInputVal(e.target.value);\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const body = {\r\n      description: inputVal,\r\n    };\r\n\r\n    await axios.patch(\r\n      `https://posts-pw2021.herokuapp.com/api/v1/post/comment/${idPost}`,\r\n      body,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    setInputVal(\"\");\r\n    afterSubmit(body);\r\n  }\r\n\r\n  return (\r\n    <form className=\"w-full\" onSubmit={onSubmit}>\r\n      <input\r\n        value={inputVal}\r\n        onChange={onChange}\r\n        className=\"px-4 py-2 w-full rounded-2xl my-2 text-gray-800 border-2 border-white text-xs\"\r\n        type=\"text\"\r\n        placeholder=\"Comentar\"\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddComment;\r\n","import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { MdOutlinePublishedWithChanges } from \"react-icons/all\";\r\n\r\nconst Edit = ({id}) => {\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.target);\r\n        const body = Object.fromEntries(formData.entries());\r\n        const validation = Array.from(formData.values());\r\n    \r\n        const isValid = validation.every((it) => it !== \"\");\r\n    \r\n        if (!isValid) return alert(\"Complete todos los campos para continuar\");\r\n    \r\n        const res = await axios.put(\r\n          `https://posts-pw2021.herokuapp.com/api/v1/post/update/${id}`,\r\n          { ...body, active: body.active === \"on\" },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n          }\r\n        );\r\n      }\r\n\r\nreturn (\r\n    <form\r\n      id=\"form\"\r\n      onSubmit={onSubmit}\r\n      className=\"bg-white bg-opacity-20 mt-3 p-3 text-gray-200 font-bol space-y-3\"\r\n    >\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"title\">Title</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"title\"\r\n          id=\"title\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"description\"\r\n          id=\"description\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"image\">Image</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"image\"\r\n          id=\"image\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"active\">Active</label>\r\n        <input\r\n          className=\"text-red-500 w-4 h-4 mr-2 focus:ring-red-500 focus:ring-opacity-25 border border-gray-200 rounded  \"\r\n          type=\"checkbox\"\r\n          name=\"active\"\r\n          id=\"active\"\r\n        />\r\n      </div>\r\n      <button\r\n        type=\"submit\"\r\n        className=\"bg-green-500 w-full rounded-2xl text-center items-center flex py-2 justify-center font-bold\"\r\n      >\r\n        <MdOutlinePublishedWithChanges className=\"mr-5 h-6 w-6\" />\r\n        Publish\r\n      </button>\r\n    </form>\r\n);\r\n};\r\n\r\nexport default Edit;","import shortid from \"shortid\";\r\nimport React, { useState } from \"react\";\r\nimport { AiOutlineHeart, FaCommentAlt, VscTrash, BsPencilFill } from \"react-icons/all\";\r\nimport axios from \"axios\";\r\nimport Comment from \"./Comment\";\r\nimport AddComment from \"../Components/AddComment\";\r\nimport Edit from \"./Edit\";\r\n\r\n\r\nconst Post = ({ username, post }) => {\r\n  const { _id, title, description, image, user, createdAt, likes, comments } =\r\n    post;\r\n\r\n  const [ Visibility, setVisibility] = useState(false); \r\n  const [commentState, setCommentState] = useState(comments);\r\n  const [liked, setliked] = useState(\r\n    likes.some((user) => user.username === username)\r\n  );\r\n  const [likesCount, setLikes] = useState(likes.length);\r\n\r\n  function addComment(comment) {\r\n    setCommentState([...commentState, { ...comment, user: { username } }]);\r\n  }\r\n\r\n  async function likePost() {\r\n    try {\r\n      await axios.patch(\r\n        `https://posts-pw2021.herokuapp.com/api/v1/post/like/${_id}`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!liked) {\r\n        setLikes(likesCount + 1);\r\n        setliked(true);\r\n      } else {\r\n        setLikes(likesCount - 1);\r\n        setliked(false);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n    async function hideFunction() {\r\n      try{\r\n        const { data } = await axios.patch(\r\n          `https://posts-pw2021.herokuapp.com/api/v1/post/toggle/${_id}`, null ,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n          }); \r\n          \r\n          this.props.history.push('/');\r\n\r\n    }catch(err){\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col flex-initial bg-gray-200 bg-opacity-40 rounded-2xl md:w-8/12 p-3 text-white my-3\">\r\n      <div className=\"w-full flex space-around font-bold \">\r\n        <h1 className=\"w-1/2\">@{user?.username}</h1>\r\n        <h2 className=\" text-right w-1/2 \">\r\n          {new Date(createdAt).toLocaleDateString()}\r\n        </h2>\r\n      </div>\r\n      {\r\n        <img\r\n          className=\" w-full h-30 object-cover my-2 rounded-2xl\"\r\n          src={image}\r\n          alt={title}\r\n        />\r\n      }\r\n      \r\n      <div className=\"w-full flex flex-col font-medium rounded-2xl text-sm space-y-3\">\r\n        <h1 className=\"\">{title}</h1>\r\n        <h2 className=\"font-normal text-xs\">{description}</h2>\r\n      </div>\r\n      <div className=\"w-full mt-4 flex justify-between\t\">\r\n        \r\n        <button\r\n          onClick={likePost}\r\n          type=\"button\"\r\n          className={`flex space-x-3 text-xs justify-center items-center w-1/2 ${\r\n            liked ? \" solid text-red-500\" : \"\"\r\n          } `}\r\n        >\r\n          <span>\r\n            {\" \"}\r\n            <AiOutlineHeart className=\"w-5 h-5 mr-3\" />\r\n          </span>\r\n          {likesCount}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"flex space-x-3 text-xs justify-center items-center w-1/2 \"\r\n        >\r\n          <span>\r\n            {\" \"}\r\n            <FaCommentAlt className=\"w-4 h-4 mr-3  text-white \" />\r\n          </span>\r\n          {commentState.length}\r\n        </button>\r\n\r\n          \r\n        <button \r\n          className=\"flex space-x-3 text-xs justify-center items-center w-1/2\"\r\n          onClick={hideFunction}> \r\n        <span>\r\n          {\" \"}\r\n          <VscTrash className=\" text-red-600 w-6 h-6 mr-3\" />\r\n        </span>\r\n      </button>\r\n          <div>\r\n          {Visibility && <Edit id={_id}/>}\r\n        <button \r\n          className=\"flex space-x-3 text-xs justify-center items-center w-1/2\"\r\n          onClick={()=>setVisibility(!Visibility)}>\r\n        <span>\r\n          {\" \"}\r\n          <BsPencilFill className=\"text-white-600 w-6 h-6 mr-3\" />\r\n        </span>\r\n      </button>\r\n      </div>\r\n      </div>\r\n      <div>\r\n        {commentState.map((comment) => (\r\n          <Comment key={shortid.generate()} info={comment} />\r\n        ))}\r\n        <AddComment idPost={_id} afterSubmit={addComment} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Loading from \"./Loading\";\r\nimport Post from \"./Post\";\r\n\r\nconst Postcontainer = ({ username }) => {\r\n  const [posts, setPosts] = useState({\r\n    loading: true,\r\n    data: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function getPosts() {\r\n      const { data } = await axios.get(\r\n        \"https://posts-pw2021.herokuapp.com/api/v1/post/all?limit=30&page=0\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      setPosts({ loading: false, data: data.data });\r\n    }\r\n\r\n    getPosts();\r\n  }, []);\r\n\r\n  if (posts.loading) return <Loading />;\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap px-6 mt-2 justify-center items-center \">\r\n      {posts.data.map((post) => (\r\n        <Post key={post._id} username={username} post={post} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Postcontainer;\r\n","import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { MdOutlinePublishedWithChanges } from \"react-icons/all\";\r\n\r\nconst PostForm = () => {\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n    const body = Object.fromEntries(formData.entries());\r\n    const validation = Array.from(formData.values());\r\n\r\n    const isValid = validation.every((it) => it !== \"\");\r\n\r\n    if (!isValid) return alert(\"Complete todos los campos para continuar\");\r\n\r\n    const res = await axios.post(\r\n      \"https://posts-pw2021.herokuapp.com/api/v1/post/create\",\r\n      { ...body, active: body.active === \"on\" },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form\r\n      id=\"form\"\r\n      onSubmit={onSubmit}\r\n      className=\"bg-white bg-opacity-20 mt-3 p-3 text-gray-200 font-bol space-y-3\"\r\n    >\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"title\">Title</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"title\"\r\n          id=\"title\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"description\"\r\n          id=\"description\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"image\">Image</label>\r\n        <input\r\n          className=\"text-gray-600 px-2 py-1 my-1\"\r\n          type=\"text\"\r\n          name=\"image\"\r\n          id=\"image\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col text-sm \">\r\n        <label htmlFor=\"active\">Active</label>\r\n        <input\r\n          className=\"text-red-500 w-4 h-4 mr-2 focus:ring-red-500 focus:ring-opacity-25 border border-gray-200 rounded  \"\r\n          type=\"checkbox\"\r\n          name=\"active\"\r\n          id=\"active\"\r\n        />\r\n      </div>\r\n      <button\r\n        type=\"submit\"\r\n        className=\"bg-green-500 w-full rounded-2xl text-center items-center flex py-2 justify-center font-bold\"\r\n      >\r\n        <MdOutlinePublishedWithChanges className=\"mr-5 h-6 w-6\" />\r\n        Publish\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\nexport default PostForm;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { SiAddthis } from \"react-icons/all\";\r\nimport Postcontainer from \"../Components/Postcontainer\";\r\nimport PostForm from \"../Components/PostForm\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst Main = () => {\r\n  const [isVisibleForm, setIsVisibleForm] = useState(false);\r\n  const navigate = useNavigate();\r\n  const user = localStorage.getItem(\"token\");\r\n  const role = localStorage.getItem(\"role\");\r\n  const [whoami, setWhoami] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    async function getIdentity() {\r\n      const { data } = await axios.get(\r\n        \"https://posts-pw2021.herokuapp.com/api/v1/auth/whoami\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${user}`,\r\n          },\r\n        }\r\n      );\r\n      setWhoami(data.username);\r\n    }\r\n\r\n    getIdentity();\r\n    \r\n    if (user == null) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n  \r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {role === \"admin\" && (\r\n        <div className=\"px-8\">\r\n          {isVisibleForm && <PostForm />}\r\n          <button\r\n            onClick={() => setIsVisibleForm(!isVisibleForm)}\r\n            type=\"button\"\r\n            className=\"w-full text-center flex justify-center mt-3 py-4 \"\r\n          >\r\n            <SiAddthis className=\"stroke text-white h-6 w-6 \" />\r\n          </button>\r\n        </div>\r\n      )}\r\n      <Postcontainer username={whoami} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nconst Posts = () => (\r\n  <div className=\"text-6x1 font-bold text-green-600\">POST TEST</div>\r\n);\r\n\r\nexport default Posts;\r\n","import React from \"react\";\r\nimport { Outlet } from \"react-router\";\r\n\r\nconst Layout = ({ props }) => {\r\n  console.log(props);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Outlet />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport Login from \"./Pages/login\";\nimport Main from \"./Pages/Main\";\nimport Posts from \"./Pages/Posts\";\nimport Layout from \"./Components/Layout\";\n\nconst App = () => (\n  <Router>\n    <Routes>\n      <Route element={<Layout />}>\n        <Route exact path=\"/\" element={<Main />} />\n        <Route exact path=\"/Posts\" element={<Posts />} />\n      </Route>\n      <Route exact path=\"/login\" element={<Login />} />\n    </Routes>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}